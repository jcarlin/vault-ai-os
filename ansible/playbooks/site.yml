---
# Master Playbook - Vault Cube Golden Image
# Orchestrates all roles for base system configuration
# Phase: Epic 1a - Demo Box Operation

- name: Configure Vault Cube Base System
  hosts: all
  become: true
  gather_facts: true

  roles:
    - role: common
      tags: ['common', 'base']

    - role: users
      tags: ['users', 'base']

    - role: packages
      tags: ['packages', 'base']

    - role: networking
      tags: ['networking', 'base']

    - role: docker
      tags: ['docker']

    - role: python
      tags: ['python']

    - role: uv
      tags: ['uv', 'python']

    - role: nodejs
      tags: ['nodejs']

  post_tasks:
    - name: Display completion message
      debug:
        msg:
          - "✅ Vault Cube base system configuration complete!"
          - "⚠️  DEMO CONFIGURATION - Security hardening NOT applied"
          - "   For production: Enable security role in playbook and Packer config"
          - ""
          - "Installed components:"
          - "  • Docker Engine configured for GPU container support"
          - "  • Python 3.12 with ML build dependencies (30% faster than 3.10)"
          - "  • uv package manager for Python dependency management"
          - "  • Node.js LTS with npm for frontend builds"
          - "  • System packages and networking configured"
          - ""
          - "Ready for AI framework installation (NVIDIA drivers, PyTorch, TensorFlow, vLLM)"
          - "Ready for application deployment (run app.yml after gpu.yml)"
