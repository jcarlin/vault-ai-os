---
# ansible/inventory/cloud.yml
# Inventory for cloud GPU instances (GCP Packer builds)
#
# Testing strategy: GCP G4 instances with RTX PRO 6000 Blackwell GPUs
# provide full Packer build support (VM-level kernel modules, driver
# install, reboot) with the same sm_120 architecture as our target
# 2x RTX 5090 bare-metal deployment.

all:
  hosts:
    gcp-gpu:
      # GCP Packer build instance (populated dynamically by Packer)
      ansible_host: "{{ gcp_instance_ip }}"
      ansible_port: 22
      ansible_user: packer
      ansible_python_interpreter: /usr/bin/python3.12

      # GPU Configuration — Blackwell (sm_120)
      nvidia_expected_gpu_count: 1
      nvidia_gpu_architecture: "blackwell"

      # Driver Configuration — matches bare-metal target
      cuda_version: "12.8"

  vars:
    # Cloud-specific settings
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'

  children:
    gpu_servers:
      hosts:
        gcp-gpu:
